  // schedule snapshots:prin,kata tin diarkeia kai meta tin apotixia
  // schedule snapshots
  Simulator::Schedule(Seconds(std::max(1.0, failDownAt - 0.2)), [=,&Snapshot](){
  Snapshot("pre-failure");
});
Simulator::Schedule(Seconds(failDownAt + 0.4), [=,&Snapshot](){
  Snapshot("during-failure");
});
Simulator::Schedule(Seconds(failUpAt + 0.4), [=,&Snapshot](){
  Snapshot("post-recovery");
});
    Snapshot("pre-failure");
  });
  Simulator::Schedule(Seconds(failDownAt + 0.4), [=,&Snapshot](){
    Snapshot("during-failure");
  });
  Simulator::Schedule(Seconds(failUpAt + 0.4), [=,&Snapshot](){
    Snapshot("post-recovery");
  });

  // run
  Simulator::Stop(Seconds(10.0));
  Simulator::Run();

  Simulator::Destroy();
  return 0;
}
